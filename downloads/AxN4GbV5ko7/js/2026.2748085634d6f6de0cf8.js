"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[2026],{52026:(e,n,t)=>{t.d(n,{GI:()=>d,I9:()=>m,IV:()=>f,VM:()=>l,Y7:()=>b,vM:()=>p});var r=t(78229),o=t(96659),i=t(65882);if(5602==t.j)var u=t(3066);if(5602==t.j)var c=t(9997);var s=t(40397),a=t(86866);const p={count:0};function l(e){return(0,u.Sh)((()=>e(new c.Jq)),(()=>e(new c.sD)),!1)}const f=e=>{const{additionalFilter:n,sweepData:t,direction:i,sourceSweep:u,ignoreSweeps:c,directionFactor:s,considerTrims:a,meshQuery:p}=e;if(!t.currentSweepObject)return[];const l=u||t.currentSweepObject;let f=r.xg(l);a&&p&&!l.neighborsEdited&&(f=g(l,p));const d=[r.AU(l),r.Ol(),f,r.jW(l.position,i,s)];for(const e of c)d.push(r.AU(e));const m=[o.oW(l.position,i),o.Io(l.position)];return n&&d.push(n),t.sortByScore(d,m)},d=e=>{const{sweepData:n,direction:t,viewDirection:u,sourceSweep:c,ignoreSweeps:s,directionFactor:a,additionalFilter:l,meshQuery:f,scorers:d=[],filters:m=[]}=e;if(!n.currentSweepObject)return[];const b=t.clone().normalize(),y=u?u.clone().normalize():void 0,v=c||n.currentSweepObject;m.push(r.AU(v),r.Ol(),r.fm(v.position,i.U.maxDistSameFloor*i.U.maxDistSameFloor),r.Zx());for(const e of s)m.push(r.AU(e));return f&&!v.neighborsEdited||m.push(r.xg(v)),y?m.push(j(v,b,y,null!=a?a:i.U.directionFactor,i.U.viewDirectionFactor)):m.push(r.jW(v.position,b,a)),l&&m.push(l),f&&!v.neighborsEdited&&m.push(r.Zz.negate(h(v,f))),y&&d.push(o.VY(v.position,y,i.U.viewDirectionWeight)),d.push(o.oW(v.position,b,i.U.directionWeight),o.Io(v.position),w(v),O(v.sourceViewId)),p.count=0,n.sortByScore(m,d)},m=(e,n,t,u,c=[],s=[])=>{s.push(r.Ol(),r.Zx()),c.push(o.Io(t.point));const a=e.currentSweepObject;n&&a?(s.push(r.AU(a),r.lp(a.position,i.U.longerTransitionMaxDist),r.xg(a)),c.push(y(e),O(a.sourceViewId))):s.push(r.lp(t.point,i.U.longerTransitionMaxDist)),t.face&&s.push(r.DJ(t.point,t.face.normal));const l=u.floorIdFromObject(t.object);l&&s.push(r.Eo(l));const f=u.mdsRoomIdFromObject(t.object);f&&s.push(v(f)),p.count=0;const d=e.sortByScore(s,c);if(0===d.length){const n=e.getClosestSweep(t.point,!0);d.push({sweep:n,score:0})}return d},b=(e,n,t)=>{const r=(0,s.kf)(e,n);return t&&r.multiply(t),(0,a.V5)(r)},y=e=>{function n(n){return e.containsSweep(n.id)?5:-5}return Object.defineProperty(n,"name",{value:"_preferUnfiltered"}),n},O=e=>{function n(n){return e===n.sourceViewId?1:-1}return Object.defineProperty(n,"name",{value:"_bySameView"}),n},v=e=>{function n(n){return e===n.roomId}return Object.defineProperty(n,"name",{value:"_bySameRoom"}),n},j=(e,n,t,o,i)=>{const u=r.jW(e.position,n,o);Object.defineProperty(u,"name",{value:"_filterByDir"});const c=r.Zz.some(r.Zz.every(u,r.lp(e.position,5)),r.jW(e.position,t,i));Object.defineProperty(c,"name",{value:"_filterByDirOrViewDir"});return n.dot(t)<.25?u:c},h=(e,n)=>{function t(t){return p.count++,n.isSegmentOccluded(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_notRaycastNeighbors"}),t},g=(e,n)=>{const t=r.Zz.some(r.xg(e),r.Zz.every(r.Zz.negate(r.xg(e)),r.Zx(),r.Ol(),r.fm(e.position,i.U.maxDistSameFloor*i.U.maxDistSameFloor),((e,n)=>{function t(t){return n.isSegmentTrimmed(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_intersectsTrim"}),t})(e,n),r.Zz.negate(h(e,n))));return Object.defineProperty(t,"name",{value:"_filterByNeighborOrTrim"}),t},w=e=>{function n(n){return r.xg(e)(n)?1:-1}return Object.defineProperty(n,"name",{value:"_visionNeighbors"}),n}},78229:(e,n,t)=>{t.d(n,{AU:()=>u,DJ:()=>y,Eo:()=>d,GS:()=>a,OX:()=>l,Ol:()=>b,Pi:()=>O,Zx:()=>p,Zz:()=>h,f:()=>s,fm:()=>j,jW:()=>m,lp:()=>v,sT:()=>f,xg:()=>c});var r=t(50018),o=t(68909);const i=.25,u=e=>{function n(n){return n!==e}return Object.defineProperty(n,"name",{value:"_not"}),n},c=e=>{function n(n){return!!e.neighbours&&(-1!==e.neighbours.indexOf(n.id)||-1!==e.neighbours.indexOf(n.platformId))}return Object.defineProperty(n,"name",{value:"_neighbor"}),n},s=e=>{function n(n){return e===n||c(e)(n)}return Object.defineProperty(n,"name",{value:"_neighborOrSelf"}),n};function a(e){return e&&e.placementType===r.EO.MANUAL}function p(){function e(e){return e&&e.alignmentType===r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_aligned"}),e}const l=()=>{function e(e){return e&&e.alignmentType!==r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_unaligned"}),e},f=e=>{function n(n){return n&&e.floorId===n.floorId}return Object.defineProperty(n,"name",{value:"_sameFloor"}),n},d=e=>{function n(n){return n&&e===n.floorId}return Object.defineProperty(n,"name",{value:"_onFloor"}),n},m=(()=>{const e=new o.Vector3,n=new o.Vector3;return(t,r,o=i)=>{function u(i){return e.copy(i.position).sub(t).normalize().dot(n.copy(r))>o}return Object.defineProperty(u,"name",{value:"_inDirection"}),u}})(),b=()=>{function e(e){return e&&e.enabled}return Object.defineProperty(e,"name",{value:"_enabled"}),e},y=(e,n)=>{const t=new o.Vector3;function r(r){return t.copy(r.position).sub(e).normalize().dot(n)>0}return n=n.clone(),Object.defineProperty(r,"name",{value:"_byNormal"}),r},O=(e,n)=>{function t(t){return e.distanceTo(t.position)>n}return Object.defineProperty(t,"name",{value:"_outsideMaxDist"}),t},v=(e,n)=>{function t(t){return e.distanceTo(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxDist"}),t},j=(e,n)=>{function t(t){return e.distanceToSquared(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxSqDist"}),t},h={negate:e=>function(n){return!e.call(e,n)},every:(...e)=>function(n){return e.every((e=>e(n)))},some:(...e)=>function(n){return e.some((e=>e(n)))}}},96659:(e,n,t)=>{t.d(n,{Io:()=>c,VY:()=>a,cv:()=>p,d$:()=>u,oW:()=>s});var r=t(68909);const o=-1,i=10,u=(e,n=o)=>{function t(t){return e.distanceToSquared(t.position)*n}return Object.defineProperty(t,"name",{value:"_distanceSq"}),t},c=(e,n=o)=>{function t(t){return e.distanceTo(t.position)*n}return Object.defineProperty(t,"name",{value:"_distance"}),t},s=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_direction"}),u},a=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_viewDirNorm"}),u},p=(e,n=o)=>{function t(t){return e.distanceToSquared(t.floorPosition)*n}return Object.defineProperty(t,"name",{value:"_floorDistSq"}),t}}}]);